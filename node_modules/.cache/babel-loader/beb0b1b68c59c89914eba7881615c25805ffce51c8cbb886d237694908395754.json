{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import'./PolicyList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PolicyList=()=>{const[policies,setPolicies]=useState([]);const[expandedPolicyId,setExpandedPolicyId]=useState(null);const userEmail=localStorage.getItem('userEmail');const history=useHistory();useEffect(()=>{axios.get('http://localhost:8080/admin/policies',{headers:{'Authorization':'Basic YWRtaW4xMjM6Y21z'}}).then(response=>{setPolicies(response.data);}).catch(error=>{console.error('There was an error fetching the policies!',error);});},[]);const handleEnroll=policyName=>{const registrationData={userEmail,policyName};console.log(registrationData);axios.post('http://localhost:8090/enrollement/reg',{\"userEmail\":userEmail,\"policyName\":policyName}).then(response=>{console.log('Enrollment successful:',response.data,userEmail,policyName);alert('Enrollment successful!');history.push('/customerdash');}).catch(error=>{console.error('There was an error enrolling in the policy!',error);});};const toggleDescription=policyId=>{setExpandedPolicyId(expandedPolicyId===policyId?null:policyId);};return/*#__PURE__*/_jsx(\"div\",{className:\"policy-list\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Policy Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Coverage Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:policies.map(policy=>/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>toggleDescription(policy.id),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"td\",{children:policy.id}),/*#__PURE__*/_jsx(\"td\",{children:policy.policyName}),/*#__PURE__*/_jsx(\"td\",{children:policy.coverageAmount}),/*#__PURE__*/_jsx(\"td\",{children:expandedPolicyId===policy.id?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:policy.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEnroll(policy.policyName),children:\"Enroll\"})]}):/*#__PURE__*/_jsxs(\"span\",{children:[policy.description.length>100?`${policy.description.substring(0,100)}... `:policy.description,/*#__PURE__*/_jsx(\"span\",{className:\"more-link\",onClick:()=>toggleDescription(policy.id)})]})})]})},policy.id))})]})});};export default PolicyList;","map":{"version":3,"names":["axios","React","useEffect","useState","useHistory","jsx","_jsx","jsxs","_jsxs","PolicyList","policies","setPolicies","expandedPolicyId","setExpandedPolicyId","userEmail","localStorage","getItem","history","get","headers","then","response","data","catch","error","console","handleEnroll","policyName","registrationData","log","post","alert","push","toggleDescription","policyId","className","children","map","policy","Fragment","onClick","id","style","cursor","coverageAmount","description","length","substring"],"sources":["C:/Users/ungati_mohith/Downloads/react-website/react-website-v1-master/src/components/pages/PolicyList.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './PolicyList.css';\n\nconst PolicyList = () => {\n  const [policies, setPolicies] = useState([]);\n  const [expandedPolicyId, setExpandedPolicyId] = useState(null);\n  const userEmail = localStorage.getItem('userEmail');\n  const history = useHistory();\n\n  useEffect(() => {\n    axios.get('http://localhost:8080/admin/policies', {\n      headers: {\n        'Authorization': 'Basic YWRtaW4xMjM6Y21z'\n      }\n    })\n    .then(response => {\n      setPolicies(response.data);\n    })\n    .catch(error => {\n      console.error('There was an error fetching the policies!', error);\n    });\n  }, []);\n\n  const handleEnroll = (policyName) => {\n    const registrationData = {\n      userEmail,\n      policyName\n    };\n    console.log(registrationData);\n\n    axios.post('http://localhost:8090/enrollement/reg', { \"userEmail\": userEmail, \"policyName\": policyName })\n    .then(response => {\n      console.log('Enrollment successful:', response.data, userEmail, policyName);\n      alert('Enrollment successful!');\n      history.push('/customerdash');\n    })\n    .catch(error => {\n      console.error('There was an error enrolling in the policy!', error);\n    });\n  };\n\n  const toggleDescription = (policyId) => {\n    setExpandedPolicyId(expandedPolicyId === policyId ? null : policyId);\n  };\n\n  return (\n    <div className='policy-list'>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Policy Name</th>\n            <th>Coverage Amount</th>\n            <th>Description</th>\n          </tr>\n        </thead>\n        <tbody>\n          {policies.map(policy => (\n            <React.Fragment key={policy.id}>\n              <tr onClick={() => toggleDescription(policy.id)} style={{ cursor: 'pointer' }}>\n                <td>{policy.id}</td>\n                <td>{policy.policyName}</td>\n                <td>{policy.coverageAmount}</td>\n                <td>\n                  {expandedPolicyId === policy.id ? (\n                    <div>\n                      <p>{policy.description}</p>\n                      <button onClick={() => handleEnroll(policy.policyName)}>Enroll</button>\n                    </div>\n                  ) : (\n                    <span>\n                      {policy.description.length > 100 ? \n                        `${policy.description.substring(0, 100)}... ` : policy.description}\n                      <span className=\"more-link\" onClick={() => toggleDescription(policy.id)}>\n                      </span>\n                    </span>\n                  )}\n                </td>\n              </tr>\n            </React.Fragment>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default PolicyList;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACS,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAAAW,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CACnD,KAAM,CAAAC,OAAO,CAAGb,UAAU,CAAC,CAAC,CAE5BF,SAAS,CAAC,IAAM,CACdF,KAAK,CAACkB,GAAG,CAAC,sCAAsC,CAAE,CAChDC,OAAO,CAAE,CACP,eAAe,CAAE,wBACnB,CACF,CAAC,CAAC,CACDC,IAAI,CAACC,QAAQ,EAAI,CAChBV,WAAW,CAACU,QAAQ,CAACC,IAAI,CAAC,CAC5B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACdC,OAAO,CAACD,KAAK,CAAC,2CAA2C,CAAEA,KAAK,CAAC,CACnE,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,YAAY,CAAIC,UAAU,EAAK,CACnC,KAAM,CAAAC,gBAAgB,CAAG,CACvBd,SAAS,CACTa,UACF,CAAC,CACDF,OAAO,CAACI,GAAG,CAACD,gBAAgB,CAAC,CAE7B5B,KAAK,CAAC8B,IAAI,CAAC,uCAAuC,CAAE,CAAE,WAAW,CAAEhB,SAAS,CAAE,YAAY,CAAEa,UAAW,CAAC,CAAC,CACxGP,IAAI,CAACC,QAAQ,EAAI,CAChBI,OAAO,CAACI,GAAG,CAAC,wBAAwB,CAAER,QAAQ,CAACC,IAAI,CAAER,SAAS,CAAEa,UAAU,CAAC,CAC3EI,KAAK,CAAC,wBAAwB,CAAC,CAC/Bd,OAAO,CAACe,IAAI,CAAC,eAAe,CAAC,CAC/B,CAAC,CAAC,CACDT,KAAK,CAACC,KAAK,EAAI,CACdC,OAAO,CAACD,KAAK,CAAC,6CAA6C,CAAEA,KAAK,CAAC,CACrE,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAS,iBAAiB,CAAIC,QAAQ,EAAK,CACtCrB,mBAAmB,CAACD,gBAAgB,GAAKsB,QAAQ,CAAG,IAAI,CAAGA,QAAQ,CAAC,CACtE,CAAC,CAED,mBACE5B,IAAA,QAAK6B,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1B5B,KAAA,UAAA4B,QAAA,eACE9B,IAAA,UAAA8B,QAAA,cACE5B,KAAA,OAAA4B,QAAA,eACE9B,IAAA,OAAA8B,QAAA,CAAI,IAAE,CAAI,CAAC,cACX9B,IAAA,OAAA8B,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB9B,IAAA,OAAA8B,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxB9B,IAAA,OAAA8B,QAAA,CAAI,aAAW,CAAI,CAAC,EAClB,CAAC,CACA,CAAC,cACR9B,IAAA,UAAA8B,QAAA,CACG1B,QAAQ,CAAC2B,GAAG,CAACC,MAAM,eAClBhC,IAAA,CAACL,KAAK,CAACsC,QAAQ,EAAAH,QAAA,cACb5B,KAAA,OAAIgC,OAAO,CAAEA,CAAA,GAAMP,iBAAiB,CAACK,MAAM,CAACG,EAAE,CAAE,CAACC,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAAP,QAAA,eAC5E9B,IAAA,OAAA8B,QAAA,CAAKE,MAAM,CAACG,EAAE,CAAK,CAAC,cACpBnC,IAAA,OAAA8B,QAAA,CAAKE,MAAM,CAACX,UAAU,CAAK,CAAC,cAC5BrB,IAAA,OAAA8B,QAAA,CAAKE,MAAM,CAACM,cAAc,CAAK,CAAC,cAChCtC,IAAA,OAAA8B,QAAA,CACGxB,gBAAgB,GAAK0B,MAAM,CAACG,EAAE,cAC7BjC,KAAA,QAAA4B,QAAA,eACE9B,IAAA,MAAA8B,QAAA,CAAIE,MAAM,CAACO,WAAW,CAAI,CAAC,cAC3BvC,IAAA,WAAQkC,OAAO,CAAEA,CAAA,GAAMd,YAAY,CAACY,MAAM,CAACX,UAAU,CAAE,CAAAS,QAAA,CAAC,QAAM,CAAQ,CAAC,EACpE,CAAC,cAEN5B,KAAA,SAAA4B,QAAA,EACGE,MAAM,CAACO,WAAW,CAACC,MAAM,CAAG,GAAG,CAC9B,GAAGR,MAAM,CAACO,WAAW,CAACE,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,MAAM,CAAGT,MAAM,CAACO,WAAW,cACpEvC,IAAA,SAAM6B,SAAS,CAAC,WAAW,CAACK,OAAO,CAAEA,CAAA,GAAMP,iBAAiB,CAACK,MAAM,CAACG,EAAE,CAAE,CAClE,CAAC,EACH,CACP,CACC,CAAC,EACH,CAAC,EApBcH,MAAM,CAACG,EAqBZ,CACjB,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}